{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\alvar\\\\OneDrive\\\\Escritorio\\\\FrontEnd\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { persona } from 'src/model/persona.model';\nimport { ref, uploadBytes, listAll, getDownloadURL, deleteObject } from '@angular/fire/storage';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/persona.service\";\nimport * as i2 from \"@angular/fire/storage\";\nimport * as i3 from \"src/app/service/token.service\";\nimport * as i4 from \"@angular/common\";\n\nfunction AcercaDeComponent_input_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 8);\n    i0.ɵɵlistener(\"change\", function AcercaDeComponent_input_2_Template_input_change_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.uploadImage($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AcercaDeComponent_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 9);\n  }\n\n  if (rf & 2) {\n    const image_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", image_r4, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let AcercaDeComponent = /*#__PURE__*/(() => {\n  class AcercaDeComponent {\n    constructor(personaService, storage, tokenService) {\n      this.personaService = personaService;\n      this.storage = storage;\n      this.tokenService = tokenService;\n      this.persona = new persona(\"\", \"\", \"\", \"\");\n      this.isLogged = false;\n      this.images = [];\n    }\n\n    ngOnInit() {\n      this.personaService.getPersona().subscribe(data => {\n        this.persona = data;\n      });\n      this.getImages();\n\n      if (this.tokenService.getToken()) {\n        this.isLogged = true;\n        this.uploadImage;\n      }\n    }\n\n    uploadImage($event) {\n      const file = $event.target.files[0];\n      console.log(file);\n      const imagesRef = ref(this.storage, 'images');\n      const imgRef = ref(this.storage, `images/${file.name}`);\n      console.log(imgRef);\n      uploadBytes(imgRef, file).then(response => {\n        console.log(response);\n        this.getImages();\n      }).catch(error => console.log(error));\n      listAll(imagesRef).then(response => {\n        console.log(response);\n\n        if (response.items.length > 0) {\n          const oldImage = response.items[0];\n          const oldImg = ref(this.storage, `images/${oldImage.name}`);\n          deleteObject(oldImg).then(response => {\n            console.log(response);\n          }).catch(error => console.log(error));\n        }\n      }).catch(error => console.log(error));\n    }\n\n    getImages() {\n      var _this = this;\n\n      const imagesRef = ref(this.storage, 'images');\n      listAll(imagesRef).then( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (response) {\n          console.log(response);\n          _this.images = [];\n\n          for (let item of response.items) {\n            const url = yield getDownloadURL(item);\n\n            _this.images.push(url);\n          }\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()).catch(error => console.log(error));\n    }\n\n  }\n\n  AcercaDeComponent.ɵfac = function AcercaDeComponent_Factory(t) {\n    return new (t || AcercaDeComponent)(i0.ɵɵdirectiveInject(i1.PersonaService), i0.ɵɵdirectiveInject(i2.Storage), i0.ɵɵdirectiveInject(i3.TokenService));\n  };\n\n  AcercaDeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AcercaDeComponent,\n    selectors: [[\"app-acerca-de\"]],\n    decls: 15,\n    vars: 5,\n    consts: [[1, \"row\"], [\"id\", \"img\", 1, \"image\"], [\"type\", \"file\", 3, \"change\", 4, \"ngIf\"], [3, \"src\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-xs-12\", \"col-sm-2\", \"col-md-2\", \"col-lg-2\"], [\"id\", \"nombre\"], [1, \"col-xs-12\", \"col-sm-10\", \"col-md-10\", \"col-lg-10\"], [\"id\", \"descripcion\"], [\"type\", \"file\", 3, \"change\"], [3, \"src\"]],\n    template: function AcercaDeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, AcercaDeComponent_input_2_Template, 1, 0, \"input\", 2);\n        i0.ɵɵtemplate(3, AcercaDeComponent_img_3_Template, 1, 1, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"p\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"p\");\n        i0.ɵɵtext(8, \"Full Stack Developer Jr.\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"span\")(11, \"h1\");\n        i0.ɵɵtext(12, \"Acerca de mi\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\", 7);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLogged);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.images);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate2(\"\", ctx.persona.nombre, \" \", ctx.persona.apellido, \"\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.persona.descripcion);\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf],\n    styles: [\".row[_ngcontent-%COMP%]{padding:25px;width:100%;margin:auto}div[_ngcontent-%COMP%]{background-color:#33d0ef;text-align:center}#nombre[_ngcontent-%COMP%]{margin-top:45px;font-weight:700}@media (min-width: 576px){img[_ngcontent-%COMP%]{position:absolute;width:12%;border-radius:100%;left:3.6%;border-style:solid;top:370px}}@media (max-width: 575px){img[_ngcontent-%COMP%]{width:30%;border-radius:100%;left:42%;border-style:solid;top:630px}}input[_ngcontent-%COMP%]{margin-right:710px}\"]\n  });\n  return AcercaDeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}